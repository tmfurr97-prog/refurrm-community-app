module.exports=[87770,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(20341),g=a.i(82019),h=a.i(50753),i=a.i(65660),j=a.i(54763),k=a.i(83369),l=b([g,h,i,j]);function m({type:a,onClose:b}){let c=(0,k.useRouter)();return(0,e.useEffect)(()=>{let a=Date.now()+3e3,b=()=>{Date.now()<a&&requestAnimationFrame(b)};b()},[]),(0,d.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,d.jsxs)(h.Card,{className:"max-w-md w-full p-8 text-center",children:[(0,d.jsx)(f.CheckCircle,{className:"w-20 h-20 text-green-500 mx-auto mb-4"}),(0,d.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"donation"===a?"Thank You!":"Welcome to Pro!"}),(0,d.jsx)("p",{className:"text-gray-600 mb-6",children:"donation"===a?"Your donation has been processed successfully. You're helping reunite families with their belongings!":"Your Pro subscription is now active. Enjoy full access to AI scanning, analytics, and priority support!"}),(0,d.jsxs)("div",{className:"flex gap-3",children:[(0,d.jsx)(j.Button,{onClick:()=>c.push("/profile"),className:"flex-1 bg-[#315E47] hover:bg-[#1C2E25]",children:"View Profile"}),(0,d.jsx)(j.Button,{onClick:b||(()=>c.push("/")),variant:"outline",className:"flex-1",children:"Continue"})]})]})})}[g,h,i,j]=l.then?(await l)():l,a.s(["PaymentSuccess",()=>m]),c()}catch(a){c(a)}},!1),24535,a=>a.a(async(b,c)=>{try{let b=await a.y("@radix-ui/react-alert-dialog");a.n(b),c()}catch(a){c(a)}},!0),19267,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(24535),g=a.i(26585),h=a.i(65660),i=a.i(54763),j=b([f,g,h,i]);[f,g,h,i]=j.then?(await j)():j;let k=f.Root,l=f.Trigger,m=f.Portal,n=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Overlay,{className:(0,g.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b,ref:c}));n.displayName=f.Overlay.displayName;let o=e.forwardRef(({className:a,...b},c)=>(0,d.jsxs)(m,{children:[(0,d.jsx)(n,{}),(0,d.jsx)(f.Content,{ref:c,className:(0,g.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...b})]}));o.displayName=f.Content.displayName;let p=({className:a,...b})=>(0,d.jsx)("div",{className:(0,g.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...b});p.displayName="AlertDialogHeader";let q=({className:a,...b})=>(0,d.jsx)("div",{className:(0,g.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});q.displayName="AlertDialogFooter";let r=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Title,{ref:c,className:(0,g.cn)("text-lg font-semibold",a),...b}));r.displayName=f.Title.displayName;let s=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Description,{ref:c,className:(0,g.cn)("text-sm text-muted-foreground",a),...b}));s.displayName=f.Description.displayName;let t=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Action,{ref:c,className:(0,g.cn)((0,i.buttonVariants)(),a),...b}));t.displayName=f.Action.displayName;let u=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.Cancel,{ref:c,className:(0,g.cn)((0,i.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",a),...b}));u.displayName=f.Cancel.displayName,a.s(["AlertDialog",()=>k,"AlertDialogAction",()=>t,"AlertDialogCancel",()=>u,"AlertDialogContent",()=>o,"AlertDialogDescription",()=>s,"AlertDialogFooter",()=>q,"AlertDialogHeader",()=>p,"AlertDialogTitle",()=>r,"AlertDialogTrigger",()=>l]),c()}catch(a){c(a)}},!1),82122,a=>a.a(async(b,c)=>{try{var d=a.i(19267),e=b([d]);[d]=e.then?(await e)():e,a.s([]),c()}catch(a){c(a)}},!1),61810,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(27146),g=a.i(65660),h=a.i(54763),i=a.i(9562),j=a.i(32165),k=a.i(8473),l=a.i(63470),m=a.i(82019),n=a.i(50753),o=a.i(57050),p=a.i(81170),q=a.i(80403),r=a.i(18519),s=a.i(28978),t=a.i(80696),u=a.i(36857),v=a.i(3992),w=a.i(24032),x=a.i(13722),y=a.i(79382),z=a.i(34348),A=a.i(87770),B=a.i(83369),C=a.i(82122),D=a.i(19267),E=b([g,h,i,j,k,l,m,n,o,p,r,A,C,D]);function F(){var a;let{profile:b,updateProfile:c}=(0,f.useAuth)(),g=(0,B.useRouter)(),[i,k]=(0,e.useState)(""),[m,o]=(0,e.useState)(""),[C,E]=(0,e.useState)(""),[F,G]=(0,e.useState)(!1),[H,I]=(0,e.useState)([]),[J,K]=(0,e.useState)(!0),[L,M]=(0,e.useState)(!1),[N,O]=(0,e.useState)("donation"),{toast:P}=(0,q.useToast)();(0,e.useEffect)(()=>{},[g,P]),(0,e.useEffect)(()=>{b&&(k(b.full_name||""),o(b.phone||""),E(b.address||""),Q())},[b]);let Q=async()=>{try{let{data:a,error:c}=await z.supabase.from("donations").select("*").eq("user_id",b?.id).eq("status","completed").order("created_at",{ascending:!1}).limit(10);if(c)throw c;I(a||[])}catch(a){console.error("Error fetching donations:",a)}finally{K(!1)}},R=H.reduce((a,b)=>a+Number(b.amount),0),S=H.filter(a=>a.is_recurring&&"active"===a.subscription_status).reduce((a,b)=>(a.find(a=>a.stripe_subscription_id===b.stripe_subscription_id)||a.push(b),a),[]),T=async a=>{try{let{error:b}=await z.supabase.functions.invoke("cancel-subscription",{body:{subscriptionId:a}});if(b)throw b;P({title:"Subscription Canceled",description:"Your recurring donation has been canceled."}),Q()}catch(a){P({title:"Error",description:a.message,variant:"destructive"})}},U=async a=>{a.preventDefault(),G(!0);try{await c({full_name:i,phone:m,address:C}),P({title:"Success!",description:"Your profile has been updated."})}catch(a){P({title:"Error",description:a.message,variant:"destructive"})}finally{G(!1)}};return(0,d.jsxs)("div",{className:"min-h-screen flex flex-col",children:[L&&(0,d.jsx)(A.PaymentSuccess,{type:N,onClose:()=>M(!1)}),(0,d.jsx)(r.default,{}),(0,d.jsx)("main",{className:"flex-1 container mx-auto px-4 py-12",children:(0,d.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,d.jsxs)(n.Card,{children:[(0,d.jsxs)(n.CardHeader,{children:[(0,d.jsx)(n.CardTitle,{children:"Account Overview"}),(0,d.jsx)(n.CardDescription,{children:"Your ReFURRM membership details"})]}),(0,d.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(l.Label,{className:"text-sm text-gray-600",children:"Role"}),(0,d.jsx)("div",{className:"mt-1",children:(a=>{switch(a){case"ambassador":return(0,d.jsxs)(p.Badge,{className:"bg-gradient-to-r from-[#315E47] to-[#50E3E3] text-white",children:[(0,d.jsx)(t.Crown,{className:"w-3 h-3 mr-1"}),"Ambassador"]});case"admin":return(0,d.jsxs)(p.Badge,{className:"bg-red-600",children:[(0,d.jsx)(t.Crown,{className:"w-3 h-3 mr-1"}),"Admin"]});case"buyer":return(0,d.jsxs)(p.Badge,{className:"bg-blue-600",children:[(0,d.jsx)(u.Zap,{className:"w-3 h-3 mr-1"}),"Buyer"]});case"volunteer":return(0,d.jsxs)(p.Badge,{className:"bg-green-600",children:[(0,d.jsx)(v.Users,{className:"w-3 h-3 mr-1"}),"Volunteer"]});case"family":return(0,d.jsxs)(p.Badge,{className:"bg-primary-600",children:[(0,d.jsx)(v.Users,{className:"w-3 h-3 mr-1"}),"Family"]});default:return(0,d.jsx)(p.Badge,{children:a})}})(b?.role||"")})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(l.Label,{className:"text-sm text-gray-600",children:"Subscription Plan"}),(0,d.jsx)("div",{className:"mt-1",children:(a=b?.subscription_tier,"pro"===a?(0,d.jsx)(p.Badge,{className:"bg-[#50E3E3] text-white",children:"Pro - $29/month"}):(0,d.jsx)(p.Badge,{variant:"outline",children:"Community - Free"}))})]})]}),b?.role==="ambassador"&&(0,d.jsx)("div",{className:"p-4 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-lg border border-emerald-200",children:(0,d.jsxs)("p",{className:"text-sm text-emerald-800",children:[(0,d.jsx)(t.Crown,{className:"w-4 h-4 inline mr-1"}),"You are an approved Ambassador with access to leadership tools and rescue coordination features."]})})]})]}),(0,d.jsxs)(n.Card,{children:[(0,d.jsxs)(n.CardHeader,{children:[(0,d.jsx)(n.CardTitle,{children:"Profile Settings"}),(0,d.jsx)(n.CardDescription,{children:"Manage your personal information"})]}),(0,d.jsx)(n.CardContent,{children:(0,d.jsxs)("form",{onSubmit:U,className:"space-y-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"email",children:"Email"}),(0,d.jsx)(j.Input,{id:"email",value:b?.email||"",disabled:!0})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"fullName",children:"Full Name"}),(0,d.jsx)(j.Input,{id:"fullName",value:i,onChange:a=>k(a.target.value)})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"phone",children:"Phone"}),(0,d.jsx)(j.Input,{id:"phone",type:"tel",value:m,onChange:a=>o(a.target.value)})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"address",children:"Address"}),(0,d.jsx)(j.Input,{id:"address",value:C,onChange:a=>E(a.target.value)})]}),(0,d.jsx)(h.Button,{type:"submit",disabled:F,children:F?"Saving...":"Save Changes"})]})})]}),S.length>0&&(0,d.jsxs)(n.Card,{children:[(0,d.jsxs)(n.CardHeader,{children:[(0,d.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(x.Calendar,{className:"w-5 h-5 text-blue-500"}),"Recurring Donations"]}),(0,d.jsx)(n.CardDescription,{children:"Manage your automatic monthly or annual donations"})]}),(0,d.jsx)(n.CardContent,{children:(0,d.jsx)("div",{className:"space-y-4",children:S.map(a=>(0,d.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gradient-to-r from-blue-50 to-primary-50 rounded-lg border border-blue-200",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{className:"font-bold text-lg text-[#315E47]",children:["$",Number(a.amount).toFixed(2)," / ","monthly"===a.frequency?"month":"year"]}),(0,d.jsxs)("p",{className:"text-sm text-gray-600",children:["Started ",new Date(a.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]}),(0,d.jsx)(p.Badge,{className:"mt-2 bg-green-100 text-green-700 border-green-300",children:"Active"})]}),(0,d.jsxs)(D.AlertDialog,{children:[(0,d.jsx)(D.AlertDialogTrigger,{asChild:!0,children:(0,d.jsxs)(h.Button,{variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:[(0,d.jsx)(y.X,{className:"w-4 h-4 mr-1"}),"Cancel"]})}),(0,d.jsxs)(D.AlertDialogContent,{children:[(0,d.jsxs)(D.AlertDialogHeader,{children:[(0,d.jsx)(D.AlertDialogTitle,{children:"Cancel Recurring Donation?"}),(0,d.jsxs)(D.AlertDialogDescription,{children:["Are you sure you want to cancel this $",Number(a.amount).toFixed(2)," ",a.frequency," donation? You can always set up a new recurring donation later."]})]}),(0,d.jsxs)(D.AlertDialogFooter,{children:[(0,d.jsx)(D.AlertDialogCancel,{children:"Keep Donation"}),(0,d.jsx)(D.AlertDialogAction,{onClick:()=>T(a.stripe_subscription_id),className:"bg-red-600 hover:bg-red-700",children:"Cancel Donation"})]})]})]})]},a.id))})})]}),(0,d.jsxs)(n.Card,{children:[(0,d.jsxs)(n.CardHeader,{children:[(0,d.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(w.Heart,{className:"w-5 h-5 text-red-500"}),"Your Donation History"]}),(0,d.jsxs)(n.CardDescription,{children:["Total donated: $",R.toFixed(2)]})]}),(0,d.jsx)(n.CardContent,{children:J?(0,d.jsx)("p",{className:"text-gray-500",children:"Loading donations..."}):0===H.length?(0,d.jsx)("p",{className:"text-gray-500",children:"No donations yet. Thank you for considering supporting our mission!"}):(0,d.jsx)("div",{className:"space-y-3",children:H.map(a=>(0,d.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{className:"font-semibold text-[#315E47]",children:["$",Number(a.amount).toFixed(2)]}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:new Date(a.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),(0,d.jsx)(p.Badge,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Completed"})]},a.id))})})]})]})}),(0,d.jsx)(s.default,{})]})}[g,h,i,j,k,l,m,n,o,p,r,A,C,D]=E.then?(await E)():E,a.s(["default",()=>F]),c()}catch(a){c(a)}},!1),93477,a=>a.a(async(b,c)=>{try{var d=a.i(89870),e=a.i(89106),f=a.i(44450),g=a.i(69503),h=a.i(54212),i=a.i(61810),j=a.i(10827),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/Profile",pathname:"/Profile",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/Profile",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__fa72a7a2._.js.map